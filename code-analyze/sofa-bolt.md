# sofa-bolt 源码结构分析
<p align="center">
  <img src=""/>
</p>
<p align="center"></p>

`作者：金世钰`

## sofa-bolt主要代码模块UML
sofa-bolt作为一个通信框架，整体来看，是对Netty的一个封装，其底层仍然是Netty的体系，只是在上面做了一些自定义的处理，比如连接的管理，请求模式的封装，结果的处理等等，对外提供了比较友好的接口，使得用户不必关心底层的实现，不像Tinkerpop那样直接拿Netty来进行编程。封装的好处就在于使用更加简单了，但是封装的弊处也在于用户无法掌握细节，在遇到莫名的bug时无处下手，也没办法进行定制。

~~本文主要分析sofa-bolt的源码结构，在分析时，主要走两遍代码，第一遍主要注重于功能的阅读，不要纠结于细节实现，否则容易钻入牛角尖无法自拔，在理清了功能之后，则针对较为重要的功能点进行细节性的代码实现进行分析。~~

### 框架示意
sofa-bolt官方文档对sofa-bolt的架构如下图，主要分为协议实现，协议骨架和远程核心调用接口三部分组成
<p align="center">
  <img src="https://raw.githubusercontent.com/jsycdut/photos/master/sofa-bolt/intro.png"/>
</p>
<p align="center"></p>

### c/s端划分
sofa-bolt基于c/s模型，也就是客户端/服务器模式，一个发请求，一个接受请求并处理请求然后回应结果。c/s整体的UML体系图如下所示。

<p align="center">
  <img src="https://raw.githubusercontent.com/jsycdut/photos/master/sofa-bolt/Configurable.png"/>
</p>
<p align="center">sofa-bolt c/s体系UML示意图</p>

除去杂乱的配置，其核心的体系UML图如下，可以看到c端和s端的继承体系是非常相似的。
<p align="center">
  <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2%0D%0AZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8v%0D%0Ad3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U2NyaXB0VHlwZT0iYXBwbGljYXRpb24vZWNt%0D%0AYXNjcmlwdCIgY29udGVudFN0eWxlVHlwZT0idGV4dC9jc3MiIGhlaWdodD0iMzkxcHgiIHByZXNl%0D%0AcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDozNzhweDtoZWlnaHQ6MzkxcHg7IiB2%0D%0AZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzNzggMzkxIiB3aWR0aD0iMzc4cHgiIHpvb21BbmRQ%0D%0AYW49Im1hZ25pZnkiPjxkZWZzPjxmaWx0ZXIgaGVpZ2h0PSIzMDAlIiBpZD0iZjFsa25iOWhkcWQy%0D%0AOWoiIHdpZHRoPSIzMDAlIiB4PSItMSIgeT0iLTEiPjxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImJs%0D%0AdXJPdXQiIHN0ZERldmlhdGlvbj0iMi4wIi8+PGZlQ29sb3JNYXRyaXggaW49ImJsdXJPdXQiIHJl%0D%0Ac3VsdD0iYmx1ck91dDIiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAw%0D%0AIDAgMCAwIDAgMCAwIDAgMCAuNCAwIi8+PGZlT2Zmc2V0IGR4PSI0LjAiIGR5PSI0LjAiIGluPSJi%0D%0AbHVyT3V0MiIgcmVzdWx0PSJibHVyT3V0MyIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBp%0D%0AbjI9ImJsdXJPdXQzIiBtb2RlPSJub3JtYWwiLz48L2ZpbHRlcj48L2RlZnM+PGc+PCEtLU1ENT1b%0D%0AZDQ5NzNhMTE3OTUxODE4ZDk3NGZkMjBkMGMxNmMyZTRdCmNsYXNzIENvbmZpZ3VyYWJsZS0tPjxy%0D%0AZWN0IGZpbGw9IiNGRUZFQ0UiIGZpbHRlcj0idXJsKCNmMWxrbmI5aGRxZDI5aikiIGhlaWdodD0i%0D%0ANDgiIGlkPSJDb25maWd1cmFibGUiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0%0D%0AaDogMS41OyIgd2lkdGg9IjExMSIgeD0iMTQ3IiB5PSI4Ii8+PGVsbGlwc2UgY3g9IjE2MiIgY3k9%0D%0AIjI0IiBmaWxsPSIjQjRBN0U1IiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTogI0E4MDAz%0D%0ANjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBhdGggZD0iTTE2Mi45NTMxLDIwLjc4MTMgTDE2Mi45%0D%0ANTMxLDI3LjI5NjkgTDE2NC42NzE5LDI3LjI5NjkgQzE2NS4xMjUsMjcuMjk2OSAxNjUuMjY1Niwy%0D%0ANy4zMjgxIDE2NS40Mzc1LDI3LjQ1MzEgQzE2NS42NzE5LDI3LjYyNSAxNjUuNzgxMywyNy44NzUg%0D%0AMTY1Ljc4MTMsMjguMTU2MyBDMTY1Ljc4MTMsMjguNzE4OCAxNjUuNDIxOSwyOSAxNjQuNjcxOSwy%0D%0AOSBMMTU5LjUzMTMsMjkgQzE1OS4xMjUsMjkgMTU4LjkyMTksMjguOTUzMSAxNTguNzY1NiwyOC44%0D%0AMjgxIEMxNTguNTQ2OSwyOC42NzE5IDE1OC40MDYzLDI4LjQwNjMgMTU4LjQwNjMsMjguMTU2MyBD%0D%0AMTU4LjQwNjMsMjcuODU5NCAxNTguNTYyNSwyNy41NzgxIDE1OC44MTI1LDI3LjQyMTkgQzE1OC45%0D%0ANjg4LDI3LjMxMjUgMTU5LjA5MzgsMjcuMjk2OSAxNTkuNTMxMywyNy4yOTY5IEwxNjEuMjUsMjcu%0D%0AMjk2OSBMMTYxLjI1LDIwLjc4MTMgTDE1OS41MzEzLDIwLjc4MTMgQzE1OS4xMDk0LDIwLjc4MTMg%0D%0AMTU4LjkyMTksMjAuNzUgMTU4Ljc2NTYsMjAuNjQwNiBDMTU4LjU0NjksMjAuNDY4OCAxNTguNDA2%0D%0AMywyMC4yMTg4IDE1OC40MDYzLDE5LjkzNzUgQzE1OC40MDYzLDE5LjY1NjMgMTU4LjU2MjUsMTku%0D%0AMzU5NCAxNTguODEyNSwxOS4yMDMxIEMxNTguOTY4OCwxOS4xMDk0IDE1OS4wOTM4LDE5LjA5Mzgg%0D%0AMTU5LjUzMTMsMTkuMDkzOCBMMTY0LjY3MTksMTkuMDkzOCBDMTY1LjEyNSwxOS4wOTM4IDE2NS4y%0D%0ANjU2LDE5LjEyNSAxNjUuNDM3NSwxOS4yMzQ0IEMxNjUuNjcxOSwxOS40MDYzIDE2NS43ODEzLDE5%0D%0ALjY3MTkgMTY1Ljc4MTMsMTkuOTM3NSBDMTY1Ljc4MTMsMjAuMjM0NCAxNjUuNjQwNiwyMC41MTU2%0D%0AIDE2NS4zNzUsMjAuNjcxOSBDMTY1LjI1LDIwLjc1IDE2NS4wNjI1LDIwLjc4MTMgMTY0LjY3MTks%0D%0AMjAuNzgxMyBaICIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlm%0D%0AIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2lu%0D%0AZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iNzkiIHg9IjE3NiIgeT0iMjguMTU0MyI+Q29uZmlndXJh%0D%0AYmxlPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41%0D%0AOyIgeDE9IjE0OCIgeDI9IjI1NyIgeTE9IjQwIiB5Mj0iNDAiLz48bGluZSBzdHlsZT0ic3Ryb2tl%0D%0AOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHgxPSIxNDgiIHgyPSIyNTciIHkxPSI0OCIg%0D%0AeTI9IjQ4Ii8+PCEtLU1ENT1bMjcwY2FhOGI4ZGU1Mjc2ZTNiYTkyZmMyZGQ3NzgxNjVdCmNsYXNz%0D%0AIFJlbW90aW5nU2VydmVyLS0+PHJlY3QgZmlsbD0iI0ZFRkVDRSIgZmlsdGVyPSJ1cmwoI2YxbGtu%0D%0AYjloZHFkMjlqKSIgaGVpZ2h0PSI0OCIgaWQ9IlJlbW90aW5nU2VydmVyIiBzdHlsZT0ic3Ryb2tl%0D%0AOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxMzEiIHg9IjU4IiB5PSIxMTYi%0D%0ALz48ZWxsaXBzZSBjeD0iNzMiIGN5PSIxMzIiIGZpbGw9IiNCNEE3RTUiIHJ4PSIxMSIgcnk9IjEx%0D%0AIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cGF0aCBkPSJN%0D%0ANzMuOTUzMSwxMjguNzgxMyBMNzMuOTUzMSwxMzUuMjk2OSBMNzUuNjcxOSwxMzUuMjk2OSBDNzYu%0D%0AMTI1LDEzNS4yOTY5IDc2LjI2NTYsMTM1LjMyODEgNzYuNDM3NSwxMzUuNDUzMSBDNzYuNjcxOSwx%0D%0AMzUuNjI1IDc2Ljc4MTMsMTM1Ljg3NSA3Ni43ODEzLDEzNi4xNTYzIEM3Ni43ODEzLDEzNi43MTg4%0D%0AIDc2LjQyMTksMTM3IDc1LjY3MTksMTM3IEw3MC41MzEzLDEzNyBDNzAuMTI1LDEzNyA2OS45MjE5%0D%0ALDEzNi45NTMxIDY5Ljc2NTYsMTM2LjgyODEgQzY5LjU0NjksMTM2LjY3MTkgNjkuNDA2MywxMzYu%0D%0ANDA2MyA2OS40MDYzLDEzNi4xNTYzIEM2OS40MDYzLDEzNS44NTk0IDY5LjU2MjUsMTM1LjU3ODEg%0D%0ANjkuODEyNSwxMzUuNDIxOSBDNjkuOTY4OCwxMzUuMzEyNSA3MC4wOTM4LDEzNS4yOTY5IDcwLjUz%0D%0AMTMsMTM1LjI5NjkgTDcyLjI1LDEzNS4yOTY5IEw3Mi4yNSwxMjguNzgxMyBMNzAuNTMxMywxMjgu%0D%0ANzgxMyBDNzAuMTA5NCwxMjguNzgxMyA2OS45MjE5LDEyOC43NSA2OS43NjU2LDEyOC42NDA2IEM2%0D%0AOS41NDY5LDEyOC40Njg4IDY5LjQwNjMsMTI4LjIxODggNjkuNDA2MywxMjcuOTM3NSBDNjkuNDA2%0D%0AMywxMjcuNjU2MyA2OS41NjI1LDEyNy4zNTk0IDY5LjgxMjUsMTI3LjIwMzEgQzY5Ljk2ODgsMTI3%0D%0ALjEwOTQgNzAuMDkzOCwxMjcuMDkzOCA3MC41MzEzLDEyNy4wOTM4IEw3NS42NzE5LDEyNy4wOTM4%0D%0AIEM3Ni4xMjUsMTI3LjA5MzggNzYuMjY1NiwxMjcuMTI1IDc2LjQzNzUsMTI3LjIzNDQgQzc2LjY3%0D%0AMTksMTI3LjQwNjMgNzYuNzgxMywxMjcuNjcxOSA3Ni43ODEzLDEyNy45Mzc1IEM3Ni43ODEzLDEy%0D%0AOC4yMzQ0IDc2LjY0MDYsMTI4LjUxNTYgNzYuMzc1LDEyOC42NzE5IEM3Ni4yNSwxMjguNzUgNzYu%0D%0AMDYyNSwxMjguNzgxMyA3NS42NzE5LDEyOC43ODEzIFogIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIg%0D%0AZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxp%0D%0AYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI5OSIgeD0iODci%0D%0AIHk9IjEzNi4xNTQzIj5SZW1vdGluZ1NlcnZlcjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiAj%0D%0AQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHgxPSI1OSIgeDI9IjE4OCIgeTE9IjE0OCIgeTI9%0D%0AIjE0OCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIg%0D%0AeDE9IjU5IiB4Mj0iMTg4IiB5MT0iMTU2IiB5Mj0iMTU2Ii8+PCEtLU1ENT1bZmUzNjc3ZWJkYWRi%0D%0ANTJhMDM1MmE1NzJjYjZmN2M4MmVdCmNsYXNzIEJvbHRDbGllbnQtLT48cmVjdCBmaWxsPSIjRkVG%0D%0ARUNFIiBmaWx0ZXI9InVybCgjZjFsa25iOWhkcWQyOWopIiBoZWlnaHQ9IjQ4IiBpZD0iQm9sdENs%0D%0AaWVudCIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0i%0D%0AOTEiIHg9IjIzNyIgeT0iMTE2Ii8+PGVsbGlwc2UgY3g9IjI1MiIgY3k9IjEzMiIgZmlsbD0iI0I0%0D%0AQTdFNSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0%0D%0AaDogMS4wOyIvPjxwYXRoIGQ9Ik0yNTIuOTUzMSwxMjguNzgxMyBMMjUyLjk1MzEsMTM1LjI5Njkg%0D%0ATDI1NC42NzE5LDEzNS4yOTY5IEMyNTUuMTI1LDEzNS4yOTY5IDI1NS4yNjU2LDEzNS4zMjgxIDI1%0D%0ANS40Mzc1LDEzNS40NTMxIEMyNTUuNjcxOSwxMzUuNjI1IDI1NS43ODEzLDEzNS44NzUgMjU1Ljc4%0D%0AMTMsMTM2LjE1NjMgQzI1NS43ODEzLDEzNi43MTg4IDI1NS40MjE5LDEzNyAyNTQuNjcxOSwxMzcg%0D%0ATDI0OS41MzEzLDEzNyBDMjQ5LjEyNSwxMzcgMjQ4LjkyMTksMTM2Ljk1MzEgMjQ4Ljc2NTYsMTM2%0D%0ALjgyODEgQzI0OC41NDY5LDEzNi42NzE5IDI0OC40MDYzLDEzNi40MDYzIDI0OC40MDYzLDEzNi4x%0D%0ANTYzIEMyNDguNDA2MywxMzUuODU5NCAyNDguNTYyNSwxMzUuNTc4MSAyNDguODEyNSwxMzUuNDIx%0D%0AOSBDMjQ4Ljk2ODgsMTM1LjMxMjUgMjQ5LjA5MzgsMTM1LjI5NjkgMjQ5LjUzMTMsMTM1LjI5Njkg%0D%0ATDI1MS4yNSwxMzUuMjk2OSBMMjUxLjI1LDEyOC43ODEzIEwyNDkuNTMxMywxMjguNzgxMyBDMjQ5%0D%0ALjEwOTQsMTI4Ljc4MTMgMjQ4LjkyMTksMTI4Ljc1IDI0OC43NjU2LDEyOC42NDA2IEMyNDguNTQ2%0D%0AOSwxMjguNDY4OCAyNDguNDA2MywxMjguMjE4OCAyNDguNDA2MywxMjcuOTM3NSBDMjQ4LjQwNjMs%0D%0AMTI3LjY1NjMgMjQ4LjU2MjUsMTI3LjM1OTQgMjQ4LjgxMjUsMTI3LjIwMzEgQzI0OC45Njg4LDEy%0D%0ANy4xMDk0IDI0OS4wOTM4LDEyNy4wOTM4IDI0OS41MzEzLDEyNy4wOTM4IEwyNTQuNjcxOSwxMjcu%0D%0AMDkzOCBDMjU1LjEyNSwxMjcuMDkzOCAyNTUuMjY1NiwxMjcuMTI1IDI1NS40Mzc1LDEyNy4yMzQ0%0D%0AIEMyNTUuNjcxOSwxMjcuNDA2MyAyNTUuNzgxMywxMjcuNjcxOSAyNTUuNzgxMywxMjcuOTM3NSBD%0D%0AMjU1Ljc4MTMsMTI4LjIzNDQgMjU1LjY0MDYsMTI4LjUxNTYgMjU1LjM3NSwxMjguNjcxOSBDMjU1%0D%0ALjI1LDEyOC43NSAyNTUuMDYyNSwxMjguNzgxMyAyNTQuNjcxOSwxMjguNzgxMyBaICIvPjx0ZXh0%0D%0AIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBm%0D%0Ab250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExl%0D%0Abmd0aD0iNTkiIHg9IjI2NiIgeT0iMTM2LjE1NDMiPkJvbHRDbGllbnQ8L3RleHQ+PGxpbmUgc3R5%0D%0AbGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB4MT0iMjM4IiB4Mj0iMzI3%0D%0AIiB5MT0iMTQ4IiB5Mj0iMTQ4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tl%0D%0ALXdpZHRoOiAxLjU7IiB4MT0iMjM4IiB4Mj0iMzI3IiB5MT0iMTU2IiB5Mj0iMTU2Ii8+PCEtLU1E%0D%0ANT1bY2NkMjg3Y2QxY2MwODNkMGM2YmU4MjAwMTg4NjJkNDVdCmNsYXNzIEFic3RyYWN0UmVtb3Rp%0D%0AbmdTZXJ2ZXItLT48cmVjdCBmaWxsPSIjRkVGRUNFIiBmaWx0ZXI9InVybCgjZjFsa25iOWhkcWQy%0D%0AOWopIiBoZWlnaHQ9IjQ4IiBpZD0iQWJzdHJhY3RSZW1vdGluZ1NlcnZlciIgc3R5bGU9InN0cm9r%0D%0AZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iMTgzIiB4PSI2IiB5PSIyMjQi%0D%0ALz48ZWxsaXBzZSBjeD0iMjEiIGN5PSIyNDAiIGZpbGw9IiNBOURDREYiIHJ4PSIxMSIgcnk9IjEx%0D%0AIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48cGF0aCBkPSJN%0D%0AMjIuNTc4MSwyNDEuODEyNSBMMTguNTMxMywyNDEuODEyNSBMMTguMTQwNiwyNDIuNzk2OSBMMTgu%0D%0ANTMxMywyNDIuNzk2OSBDMTguOTg0NCwyNDIuNzk2OSAxOS4xMjUsMjQyLjgyODEgMTkuMjk2OSwy%0D%0ANDIuOTUzMSBDMTkuNTE1NiwyNDMuMTI1IDE5LjY0MDYsMjQzLjM3NSAxOS42NDA2LDI0My42NTYz%0D%0AIEMxOS42NDA2LDI0My45Mzc1IDE5LjUsMjQ0LjIzNDQgMTkuMjM0NCwyNDQuMzc1IEMxOS4xMDk0%0D%0ALDI0NC40Njg4IDE4Ljg5MDYsMjQ0LjUgMTguNTMxMywyNDQuNSBMMTYuMjY1NiwyNDQuNSBDMTUu%0D%0ANTE1NiwyNDQuNSAxNS4xNDA2LDI0NC4yMTg4IDE1LjE0MDYsMjQzLjY1NjMgQzE1LjE0MDYsMjQz%0D%0ALjM1OTQgMTUuMjk2OSwyNDMuMDc4MSAxNS41NDY5LDI0Mi45MjE5IEMxNS43MDMxLDI0Mi44MTI1%0D%0AIDE1Ljg1OTQsMjQyLjc5NjkgMTYuMjgxMywyNDIuNzk2OSBMMTguOTIxOSwyMzYuMjgxMyBMMTcu%0D%0AODQzOCwyMzYuMjgxMyBDMTcuNDA2MywyMzYuMjgxMyAxNy4yMzQ0LDIzNi4yNSAxNy4wNjI1LDIz%0D%0ANi4xNDA2IEMxNi44NDM4LDIzNS45Njg4IDE2LjcwMzEsMjM1LjcxODggMTYuNzAzMSwyMzUuNDM3%0D%0ANSBDMTYuNzAzMSwyMzUuMTU2MyAxNi44NTk0LDIzNC44NzUgMTcuMTA5NCwyMzQuNzAzMSBDMTcu%0D%0AMjY1NiwyMzQuNjA5NCAxNy4zOTA2LDIzNC41OTM4IDE3Ljg0MzgsMjM0LjU5MzggTDIxLjUxNTYs%0D%0AMjM0LjU5MzggTDI0LjkwNjMsMjQyLjc5NjkgQzI1LjM3NSwyNDIuNzk2OSAyNS41MzEzLDI0Mi44%0D%0AMjgxIDI1LjcwMzEsMjQyLjk2ODggQzI1LjkyMTksMjQzLjEyNSAyNi4wNjI1LDI0My4zNzUgMjYu%0D%0AMDYyNSwyNDMuNjU2MyBDMjYuMDYyNSwyNDMuOTM3NSAyNS45MDYzLDI0NC4yMzQ0IDI1LjY1NjMs%0D%0AMjQ0LjM3NSBDMjUuNTE1NiwyNDQuNDY4OCAyNS4yOTY5LDI0NC41IDI0LjkzNzUsMjQ0LjUgTDIy%0D%0ALjU3ODEsMjQ0LjUgQzIyLjE1NjMsMjQ0LjUgMjEuOTUzMSwyNDQuNDUzMSAyMS44MTI1LDI0NC4z%0D%0AMjgxIEMyMS41OTM4LDI0NC4xNzE5IDIxLjQ1MzEsMjQzLjkyMTkgMjEuNDUzMSwyNDMuNjU2MyBD%0D%0AMjEuNDUzMSwyNDMuMzU5NCAyMS42MDk0LDI0My4wNzgxIDIxLjg1OTQsMjQyLjkyMTkgQzIyLjAx%0D%0ANTYsMjQyLjgxMjUgMjIuMTI1LDI0Mi43OTY5IDIyLjU3ODEsMjQyLjc5NjkgTDIyLjk2ODgsMjQy%0D%0ALjc5NjkgWiBNMjEuODc1LDI0MC4xMDk0IEwyMC41NDY5LDIzNi44NDM4IEwxOS4yMDMxLDI0MC4x%0D%0AMDk0IFogIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZv%0D%0AbnQtc2l6ZT0iMTIiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5k%0D%0AR2x5cGhzIiB0ZXh0TGVuZ3RoPSIxNTEiIHg9IjM1IiB5PSIyNDQuMTU0MyI+QWJzdHJhY3RSZW1v%0D%0AdGluZ1NlcnZlcjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lk%0D%0AdGg6IDEuNTsiIHgxPSI3IiB4Mj0iMTg4IiB5MT0iMjU2IiB5Mj0iMjU2Ii8+PGxpbmUgc3R5bGU9%0D%0AInN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB4MT0iNyIgeDI9IjE4OCIgeTE9%0D%0AIjI2NCIgeTI9IjI2NCIvPjwhLS1NRDU9W2ZmYzhiNjljNjE5OTY4NzA2ZGMwZTIwZmJhZWJjMDA4%0D%0AXQpjbGFzcyBBYnN0cmFjdEJvbHRDbGllbnQtLT48cmVjdCBmaWxsPSIjRkVGRUNFIiBmaWx0ZXI9%0D%0AInVybCgjZjFsa25iOWhkcWQyOWopIiBoZWlnaHQ9IjQ4IiBpZD0iQWJzdHJhY3RCb2x0Q2xpZW50%0D%0AIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuNTsiIHdpZHRoPSIxNDMi%0D%0AIHg9IjIyNCIgeT0iMjI0Ii8+PGVsbGlwc2UgY3g9IjIzOSIgY3k9IjI0MCIgZmlsbD0iI0E5RENE%0D%0ARiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDog%0D%0AMS4wOyIvPjxwYXRoIGQ9Ik0yNDAuNTc4MSwyNDEuODEyNSBMMjM2LjUzMTMsMjQxLjgxMjUgTDIz%0D%0ANi4xNDA2LDI0Mi43OTY5IEwyMzYuNTMxMywyNDIuNzk2OSBDMjM2Ljk4NDQsMjQyLjc5NjkgMjM3%0D%0ALjEyNSwyNDIuODI4MSAyMzcuMjk2OSwyNDIuOTUzMSBDMjM3LjUxNTYsMjQzLjEyNSAyMzcuNjQw%0D%0ANiwyNDMuMzc1IDIzNy42NDA2LDI0My42NTYzIEMyMzcuNjQwNiwyNDMuOTM3NSAyMzcuNSwyNDQu%0D%0AMjM0NCAyMzcuMjM0NCwyNDQuMzc1IEMyMzcuMTA5NCwyNDQuNDY4OCAyMzYuODkwNiwyNDQuNSAy%0D%0AMzYuNTMxMywyNDQuNSBMMjM0LjI2NTYsMjQ0LjUgQzIzMy41MTU2LDI0NC41IDIzMy4xNDA2LDI0%0D%0ANC4yMTg4IDIzMy4xNDA2LDI0My42NTYzIEMyMzMuMTQwNiwyNDMuMzU5NCAyMzMuMjk2OSwyNDMu%0D%0AMDc4MSAyMzMuNTQ2OSwyNDIuOTIxOSBDMjMzLjcwMzEsMjQyLjgxMjUgMjMzLjg1OTQsMjQyLjc5%0D%0ANjkgMjM0LjI4MTMsMjQyLjc5NjkgTDIzNi45MjE5LDIzNi4yODEzIEwyMzUuODQzOCwyMzYuMjgx%0D%0AMyBDMjM1LjQwNjMsMjM2LjI4MTMgMjM1LjIzNDQsMjM2LjI1IDIzNS4wNjI1LDIzNi4xNDA2IEMy%0D%0AMzQuODQzOCwyMzUuOTY4OCAyMzQuNzAzMSwyMzUuNzE4OCAyMzQuNzAzMSwyMzUuNDM3NSBDMjM0%0D%0ALjcwMzEsMjM1LjE1NjMgMjM0Ljg1OTQsMjM0Ljg3NSAyMzUuMTA5NCwyMzQuNzAzMSBDMjM1LjI2%0D%0ANTYsMjM0LjYwOTQgMjM1LjM5MDYsMjM0LjU5MzggMjM1Ljg0MzgsMjM0LjU5MzggTDIzOS41MTU2%0D%0ALDIzNC41OTM4IEwyNDIuOTA2MywyNDIuNzk2OSBDMjQzLjM3NSwyNDIuNzk2OSAyNDMuNTMxMywy%0D%0ANDIuODI4MSAyNDMuNzAzMSwyNDIuOTY4OCBDMjQzLjkyMTksMjQzLjEyNSAyNDQuMDYyNSwyNDMu%0D%0AMzc1IDI0NC4wNjI1LDI0My42NTYzIEMyNDQuMDYyNSwyNDMuOTM3NSAyNDMuOTA2MywyNDQuMjM0%0D%0ANCAyNDMuNjU2MywyNDQuMzc1IEMyNDMuNTE1NiwyNDQuNDY4OCAyNDMuMjk2OSwyNDQuNSAyNDIu%0D%0AOTM3NSwyNDQuNSBMMjQwLjU3ODEsMjQ0LjUgQzI0MC4xNTYzLDI0NC41IDIzOS45NTMxLDI0NC40%0D%0ANTMxIDIzOS44MTI1LDI0NC4zMjgxIEMyMzkuNTkzOCwyNDQuMTcxOSAyMzkuNDUzMSwyNDMuOTIx%0D%0AOSAyMzkuNDUzMSwyNDMuNjU2MyBDMjM5LjQ1MzEsMjQzLjM1OTQgMjM5LjYwOTQsMjQzLjA3ODEg%0D%0AMjM5Ljg1OTQsMjQyLjkyMTkgQzI0MC4wMTU2LDI0Mi44MTI1IDI0MC4xMjUsMjQyLjc5NjkgMjQw%0D%0ALjU3ODEsMjQyLjc5NjkgTDI0MC45Njg4LDI0Mi43OTY5IFogTTIzOS44NzUsMjQwLjEwOTQgTDIz%0D%0AOC41NDY5LDIzNi44NDM4IEwyMzcuMjAzMSwyNDAuMTA5NCBaICIvPjx0ZXh0IGZpbGw9IiMwMDAw%0D%0AMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXN0eWxlPSJp%0D%0AdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iMTExIiB4%0D%0APSIyNTMiIHk9IjI0NC4xNTQzIj5BYnN0cmFjdEJvbHRDbGllbnQ8L3RleHQ+PGxpbmUgc3R5bGU9%0D%0AInN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB4MT0iMjI1IiB4Mj0iMzY2IiB5%0D%0AMT0iMjU2IiB5Mj0iMjU2Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdp%0D%0AZHRoOiAxLjU7IiB4MT0iMjI1IiB4Mj0iMzY2IiB5MT0iMjY0IiB5Mj0iMjY0Ii8+PCEtLU1ENT1b%0D%0ANmM5NmIxOTNlYmVmZGY1ZTUzNTAwZDNlMmExNTZjMTJdCmNsYXNzIFJwY1NlcnZlci0tPjxyZWN0%0D%0AIGZpbGw9IiNGRUZFQ0UiIGZpbHRlcj0idXJsKCNmMWxrbmI5aGRxZDI5aikiIGhlaWdodD0iNDgi%0D%0AIGlkPSJScGNTZXJ2ZXIiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41%0D%0AOyIgd2lkdGg9Ijk1IiB4PSI1MCIgeT0iMzMyIi8+PGVsbGlwc2UgY3g9IjY1IiBjeT0iMzQ4IiBm%0D%0AaWxsPSIjQUREMUIyIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ry%0D%0Ab2tlLXdpZHRoOiAxLjA7Ii8+PHBhdGggZD0iTTY3LjM0MzgsMzQzLjY3MTkgTDY3LjUxNTYsMzQz%0D%0ALjc1IEM2Ny43MzQ0LDM0My40Mzc1IDY3LjkzNzUsMzQzLjM0MzggNjguMjM0NCwzNDMuMzQzOCBD%0D%0ANjguNTMxMywzNDMuMzQzOCA2OC44MTI1LDM0My40ODQ0IDY4Ljk2ODgsMzQzLjc1IEM2OS4wNjI1%0D%0ALDM0My45MDYzIDY5LjA3ODEsMzQ0LjAzMTMgNjkuMDc4MSwzNDQuNDY4OCBMNjkuMDc4MSwzNDUu%0D%0AODkwNiBDNjkuMDc4MSwzNDYuMzEyNSA2OS4wNDY5LDM0Ni41IDY4LjkzNzUsMzQ2LjY1NjMgQzY4%0D%0ALjc2NTYsMzQ2Ljg3NSA2OC41LDM0Ny4wMTU2IDY4LjIzNDQsMzQ3LjAxNTYgQzY4LjAxNTYsMzQ3%0D%0ALjAxNTYgNjcuNzgxMywzNDYuOTA2MyA2Ny42NDA2LDM0Ni43NjU2IEM2Ny41LDM0Ni42NDA2IDY3%0D%0ALjQ2ODgsMzQ2LjUxNTYgNjcuNDA2MywzNDYuMTA5NCBDNjcuMzEyNSwzNDUuNzAzMSA2Ny4xNDA2%0D%0ALDM0NS40ODQ0IDY2LjY1NjMsMzQ1LjIwMzEgQzY2LjE4NzUsMzQ0Ljk1MzEgNjUuNTc4MSwzNDQu%0D%0ANzk2OSA2NSwzNDQuNzk2OSBDNjMuMjY1NiwzNDQuNzk2OSA2Mi4wMTU2LDM0Ni4xMDk0IDYyLjAx%0D%0ANTYsMzQ3Ljg5MDYgTDYyLjAxNTYsMzQ4Ljk4NDQgQzYyLjAxNTYsMzUwLjY4NzUgNjMuMzEyNSwz%0D%0ANTEuNzgxMyA2NS4zNTk0LDM1MS43ODEzIEM2Ni4xMjUsMzUxLjc4MTMgNjYuODEyNSwzNTEuNjU2%0D%0AMyA2Ny4yMzQ0LDM1MS4zOTA2IEM2Ny40MjE5LDM1MS4yOTY5IDY3LjQyMTksMzUxLjI5NjkgNjcu%0D%0AODc1LDM1MC44MTI1IEM2OC4wNjI1LDM1MC42MjUgNjguMjY1NiwzNTAuNTQ2OSA2OC40ODQ0LDM1%0D%0AMC41NDY5IEM2OC45NTMxLDM1MC41NDY5IDY5LjM0MzgsMzUwLjkzNzUgNjkuMzQzOCwzNTEuMzkw%0D%0ANiBDNjkuMzQzOCwzNTEuNzgxMyA2OS4wMTU2LDM1Mi4yMzQ0IDY4LjQzNzUsMzUyLjY0MDYgQzY3%0D%0ALjY4NzUsMzUzLjE4NzUgNjYuNTMxMywzNTMuNDg0NCA2NS4zMTI1LDM1My40ODQ0IEM2Mi40MjE5%0D%0ALDM1My40ODQ0IDYwLjMxMjUsMzUxLjU5MzggNjAuMzEyNSwzNDkuMDE1NiBMNjAuMzEyNSwzNDcu%0D%0AODkwNiBDNjAuMzEyNSwzNDUuMTcxOSA2Mi4zMTI1LDM0My4wOTM4IDY0LjkzNzUsMzQzLjA5Mzgg%0D%0AQzY1LjgxMjUsMzQzLjA5MzggNjYuNDA2MywzNDMuMjM0NCA2Ny4zNDM4LDM0My42NzE5IFogIi8+%0D%0APHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0i%0D%0AMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZ0FuZEdseXBocyIgdGV4dExlbmd0aD0iNjMiIHg9Ijc5%0D%0AIiB5PSIzNTIuMTU0MyI+UnBjU2VydmVyPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAw%0D%0AMzY7IHN0cm9rZS13aWR0aDogMS41OyIgeDE9IjUxIiB4Mj0iMTQ0IiB5MT0iMzY0IiB5Mj0iMzY0%0D%0AIi8+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB4MT0i%0D%0ANTEiIHgyPSIxNDQiIHkxPSIzNzIiIHkyPSIzNzIiLz48IS0tTUQ1PVtiMjZlYmRiNzE5MzhhNmFi%0D%0AN2UzOGZlYzAwYzRkMWU1Nl0KY2xhc3MgUnBjQ2xpZW50LS0+PHJlY3QgZmlsbD0iI0ZFRkVDRSIg%0D%0AZmlsdGVyPSJ1cmwoI2YxbGtuYjloZHFkMjlqKSIgaGVpZ2h0PSI0OCIgaWQ9IlJwY0NsaWVudCIg%0D%0Ac3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB3aWR0aD0iOTAiIHg9%0D%0AIjI1MC41IiB5PSIzMzIiLz48ZWxsaXBzZSBjeD0iMjY1LjUiIGN5PSIzNDgiIGZpbGw9IiNBREQx%0D%0AQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6%0D%0AIDEuMDsiLz48cGF0aCBkPSJNMjY3Ljg0MzgsMzQzLjY3MTkgTDI2OC4wMTU2LDM0My43NSBDMjY4%0D%0ALjIzNDQsMzQzLjQzNzUgMjY4LjQzNzUsMzQzLjM0MzggMjY4LjczNDQsMzQzLjM0MzggQzI2OS4w%0D%0AMzEzLDM0My4zNDM4IDI2OS4zMTI1LDM0My40ODQ0IDI2OS40Njg4LDM0My43NSBDMjY5LjU2MjUs%0D%0AMzQzLjkwNjMgMjY5LjU3ODEsMzQ0LjAzMTMgMjY5LjU3ODEsMzQ0LjQ2ODggTDI2OS41NzgxLDM0%0D%0ANS44OTA2IEMyNjkuNTc4MSwzNDYuMzEyNSAyNjkuNTQ2OSwzNDYuNSAyNjkuNDM3NSwzNDYuNjU2%0D%0AMyBDMjY5LjI2NTYsMzQ2Ljg3NSAyNjksMzQ3LjAxNTYgMjY4LjczNDQsMzQ3LjAxNTYgQzI2OC41%0D%0AMTU2LDM0Ny4wMTU2IDI2OC4yODEzLDM0Ni45MDYzIDI2OC4xNDA2LDM0Ni43NjU2IEMyNjgsMzQ2%0D%0ALjY0MDYgMjY3Ljk2ODgsMzQ2LjUxNTYgMjY3LjkwNjMsMzQ2LjEwOTQgQzI2Ny44MTI1LDM0NS43%0D%0AMDMxIDI2Ny42NDA2LDM0NS40ODQ0IDI2Ny4xNTYzLDM0NS4yMDMxIEMyNjYuNjg3NSwzNDQuOTUz%0D%0AMSAyNjYuMDc4MSwzNDQuNzk2OSAyNjUuNSwzNDQuNzk2OSBDMjYzLjc2NTYsMzQ0Ljc5NjkgMjYy%0D%0ALjUxNTYsMzQ2LjEwOTQgMjYyLjUxNTYsMzQ3Ljg5MDYgTDI2Mi41MTU2LDM0OC45ODQ0IEMyNjIu%0D%0ANTE1NiwzNTAuNjg3NSAyNjMuODEyNSwzNTEuNzgxMyAyNjUuODU5NCwzNTEuNzgxMyBDMjY2LjYy%0D%0ANSwzNTEuNzgxMyAyNjcuMzEyNSwzNTEuNjU2MyAyNjcuNzM0NCwzNTEuMzkwNiBDMjY3LjkyMTks%0D%0AMzUxLjI5NjkgMjY3LjkyMTksMzUxLjI5NjkgMjY4LjM3NSwzNTAuODEyNSBDMjY4LjU2MjUsMzUw%0D%0ALjYyNSAyNjguNzY1NiwzNTAuNTQ2OSAyNjguOTg0NCwzNTAuNTQ2OSBDMjY5LjQ1MzEsMzUwLjU0%0D%0ANjkgMjY5Ljg0MzgsMzUwLjkzNzUgMjY5Ljg0MzgsMzUxLjM5MDYgQzI2OS44NDM4LDM1MS43ODEz%0D%0AIDI2OS41MTU2LDM1Mi4yMzQ0IDI2OC45Mzc1LDM1Mi42NDA2IEMyNjguMTg3NSwzNTMuMTg3NSAy%0D%0ANjcuMDMxMywzNTMuNDg0NCAyNjUuODEyNSwzNTMuNDg0NCBDMjYyLjkyMTksMzUzLjQ4NDQgMjYw%0D%0ALjgxMjUsMzUxLjU5MzggMjYwLjgxMjUsMzQ5LjAxNTYgTDI2MC44MTI1LDM0Ny44OTA2IEMyNjAu%0D%0AODEyNSwzNDUuMTcxOSAyNjIuODEyNSwzNDMuMDkzOCAyNjUuNDM3NSwzNDMuMDkzOCBDMjY2LjMx%0D%0AMjUsMzQzLjA5MzggMjY2LjkwNjMsMzQzLjIzNDQgMjY3Ljg0MzgsMzQzLjY3MTkgWiAiLz48dGV4%0D%0AdCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIg%0D%0AbGVuZ3RoQWRqdXN0PSJzcGFjaW5nQW5kR2x5cGhzIiB0ZXh0TGVuZ3RoPSI1OCIgeD0iMjc5LjUi%0D%0AIHk9IjM1Mi4xNTQzIj5ScGNDbGllbnQ8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTogI0E4MDAz%0D%0ANjsgc3Ryb2tlLXdpZHRoOiAxLjU7IiB4MT0iMjUxLjUiIHgyPSIzMzkuNSIgeTE9IjM2NCIgeTI9%0D%0AIjM2NCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS41OyIg%0D%0AeDE9IjI1MS41IiB4Mj0iMzM5LjUiIHkxPSIzNzIiIHkyPSIzNzIiLz48IS0tTUQ1PVsxZGM4NDg3%0D%0AYmIxYjBjNDAzZDE0OGRhNTZiMDA0Njg3MV0KcmV2ZXJzZSBsaW5rIENvbmZpZ3VyYWJsZSB0byBS%0D%0AZW1vdGluZ1NlcnZlci0tPjxwYXRoIGQ9Ik0xNzMuMzAxLDcyLjE3OCBDMTYyLjQwNCw4Ni44IDE1%0D%0AMC4zODMsMTAyLjkyOSAxNDAuODgxLDExNS42NzggIiBmaWxsPSJub25lIiBpZD0iQ29uZmlndXJh%0D%0AYmxlJmx0Oy1SZW1vdGluZ1NlcnZlciIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdp%0D%0AZHRoOiAxLjA7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSIxNjcuNzk0LDY3Ljg1NCwx%0D%0AODUuMzU4LDU2LDE3OS4wMTksNzYuMjIsMTY3Ljc5NCw2Ny44NTQiIHN0eWxlPSJzdHJva2U6ICNB%0D%0AODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1NRDU9W2QwZGNhMWRlNzQ5NWEwYWNjNDg1%0D%0AM2JlNDFkZmY1NzkyXQpyZXZlcnNlIGxpbmsgQ29uZmlndXJhYmxlIHRvIEJvbHRDbGllbnQtLT48%0D%0AcGF0aCBkPSJNMjMyLjA2OSw3Mi4xNzggQzI0My4xMDMsODYuOCAyNTUuMjc3LDEwMi45MjkgMjY0%0D%0ALjg5OSwxMTUuNjc4ICIgZmlsbD0ibm9uZSIgaWQ9IkNvbmZpZ3VyYWJsZSZsdDstQm9sdENsaWVu%0D%0AdCIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBvbHlnb24g%0D%0AZmlsbD0ibm9uZSIgcG9pbnRzPSIyMjYuMzIsNzYuMTgxLDIxOS44NTksNTYsMjM3LjQ5NCw2Ny43%0D%0ANDcsMjI2LjMyLDc2LjE4MSIgc3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAx%0D%0ALjA7Ii8+PCEtLU1ENT1bNTE5ZDQzNmIxZmIzNjVhNWMwNmMyYzZiNTM2NTc2ZmNdCnJldmVyc2Ug%0D%0AbGluayBSZW1vdGluZ1NlcnZlciB0byBBYnN0cmFjdFJlbW90aW5nU2VydmVyLS0+PHBhdGggZD0i%0D%0ATTExMy4wNjYsMTgzLjU0IEMxMDkuNzA3LDE5Ny4yMzUgMTA2LjExLDIxMS45IDEwMy4yMjA0LDIy%0D%0AMy42NzggIiBmaWxsPSJub25lIiBpZD0iUmVtb3RpbmdTZXJ2ZXImbHQ7LUFic3RyYWN0UmVtb3Rp%0D%0AbmdTZXJ2ZXIiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyBzdHJv%0D%0Aa2UtZGFzaGFycmF5OiA3LjAsNy4wOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iMTA2%0D%0ALjI5NSwxODEuNzU3LDExNy44NTgsMTY0LDExOS44OTIsMTg1LjA5MiwxMDYuMjk1LDE4MS43NTci%0D%0AIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjwhLS1NRDU9WzU0%0D%0AYWExNzVlODNjZGU4OTdjMmQyNjdiNDE2ODU5NmU2XQpyZXZlcnNlIGxpbmsgQm9sdENsaWVudCB0%0D%0AbyBBYnN0cmFjdEJvbHRDbGllbnQtLT48cGF0aCBkPSJNMjg3Ljc3NiwxODQuMDI0IEMyODkuNDM5%0D%0ALDE5Ny41NzkgMjkxLjIxMiwyMTIuMDM4IDI5Mi42NCwyMjMuNjc4ICIgZmlsbD0ibm9uZSIgaWQ9%0D%0AIkJvbHRDbGllbnQmbHQ7LUFic3RyYWN0Qm9sdENsaWVudCIgc3R5bGU9InN0cm9rZTogI0E4MDAz%0D%0ANjsgc3Ryb2tlLXdpZHRoOiAxLjA7IHN0cm9rZS1kYXNoYXJyYXk6IDcuMCw3LjA7Ii8+PHBvbHln%0D%0Ab24gZmlsbD0ibm9uZSIgcG9pbnRzPSIyODAuODA4LDE4NC43MDQsMjg1LjMyMSwxNjQsMjk0Ljcw%0D%0AMywxODMsMjgwLjgwOCwxODQuNzA0IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lk%0D%0AdGg6IDEuMDsiLz48IS0tTUQ1PVs4NmRiMzliY2ZkMjJiNTAwMTFmM2Q3MjMwYTZjNTRlNl0KcmV2%0D%0AZXJzZSBsaW5rIEFic3RyYWN0UmVtb3RpbmdTZXJ2ZXIgdG8gUnBjU2VydmVyLS0+PHBhdGggZD0i%0D%0ATTk3LjUsMjkyLjAyMzYgQzk3LjUsMzA1LjU3OTIgOTcuNSwzMjAuMDM4MSA5Ny41LDMzMS42Nzg0%0D%0AICIgZmlsbD0ibm9uZSIgaWQ9IkFic3RyYWN0UmVtb3RpbmdTZXJ2ZXImbHQ7LVJwY1NlcnZlciIg%0D%0Ac3R5bGU9InN0cm9rZTogI0E4MDAzNjsgc3Ryb2tlLXdpZHRoOiAxLjA7Ii8+PHBvbHlnb24gZmls%0D%0AbD0ibm9uZSIgcG9pbnRzPSI5MC41MDAxLDI5Mi4wMDA1LDk3LjUsMjcyLDEwNC41MDAxLDI5Mi4w%0D%0AMDA0LDkwLjUwMDEsMjkyLjAwMDUiIHN0eWxlPSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0%0D%0AaDogMS4wOyIvPjwhLS1NRDU9W2M4MWRjYzliNzZjNjYyMmJkN2YzYmRmOGJiZTA1YTg3XQpyZXZl%0D%0AcnNlIGxpbmsgQWJzdHJhY3RCb2x0Q2xpZW50IHRvIFJwY0NsaWVudC0tPjxwYXRoIGQ9Ik0yOTUu%0D%0ANSwyOTIuMDIzNiBDMjk1LjUsMzA1LjU3OTIgMjk1LjUsMzIwLjAzODEgMjk1LjUsMzMxLjY3ODQg%0D%0AIiBmaWxsPSJub25lIiBpZD0iQWJzdHJhY3RCb2x0Q2xpZW50Jmx0Oy1ScGNDbGllbnQiIHN0eWxl%0D%0APSJzdHJva2U6ICNBODAwMzY7IHN0cm9rZS13aWR0aDogMS4wOyIvPjxwb2x5Z29uIGZpbGw9Im5v%0D%0AbmUiIHBvaW50cz0iMjg4LjUsMjkyLjAwMDUsMjk1LjUsMjcyLDMwMi41LDI5Mi4wMDA0LDI4OC41%0D%0ALDI5Mi4wMDA1IiBzdHlsZT0ic3Ryb2tlOiAjQTgwMDM2OyBzdHJva2Utd2lkdGg6IDEuMDsiLz48%0D%0AIS0tTUQ1PVtmM2RmYTU2MzZlYjQzZmMwZGQxMzQ4YzQ1NTdjMGY3ZV0KQHN0YXJ0dW1sDQppbnRl%0D%0AcmZhY2UgQ29uZmlndXJhYmxlDQppbnRlcmZhY2UgUmVtb3RpbmdTZXJ2ZXINCmludGVyZmFjZSBC%0D%0Ab2x0Q2xpZW50DQoNCmFic3RyYWN0IEFic3RyYWN0UmVtb3RpbmdTZXJ2ZXINCmFic3RyYWN0IEFi%0D%0Ac3RyYWN0Qm9sdENsaWVudA0KDQpDb25maWd1cmFibGUgPHwtIC0gUmVtb3RpbmdTZXJ2ZXINCkNv%0D%0AbmZpZ3VyYWJsZSA8fC0gLSBCb2x0Q2xpZW50DQoNClJlbW90aW5nU2VydmVyIDx8Li4gQWJzdHJh%0D%0AY3RSZW1vdGluZ1NlcnZlcg0KQm9sdENsaWVudCA8fC4uIEFic3RyYWN0Qm9sdENsaWVudA0KDQpB%0D%0AYnN0cmFjdFJlbW90aW5nU2VydmVyIDx8LSAtIFJwY1NlcnZlcg0KQWJzdHJhY3RCb2x0Q2xpZW50%0D%0AIDx8LSAtIFJwY0NsaWVudA0KQGVuZHVtbA0KClBsYW50VU1MIHZlcnNpb24gMS4yMDE5LjEyKFN1%0D%0AbiBOb3YgMDMgMTA6MjQ6NTQgVVRDIDIwMTkpCihHUEwgc291cmNlIGRpc3RyaWJ1dGlvbikKSmF2%0D%0AYSBSdW50aW1lOiBKYXZhKFRNKSBTRSBSdW50aW1lIEVudmlyb25tZW50CkpWTTogSmF2YSBIb3RT%0D%0AcG90KFRNKSA2NC1CaXQgU2VydmVyIFZNCkphdmEgVmVyc2lvbjogMS43LjBfMjUtYjE1Ck9wZXJh%0D%0AdGluZyBTeXN0ZW06IExpbnV4CkRlZmF1bHQgRW5jb2Rpbmc6IFVURi04Ckxhbmd1YWdlOiBlbgpD%0D%0Ab3VudHJ5OiBVUwotLT48L2c+PC9zdmc+"/>
</p>

@startuml
interface Configurable
interface RemotingServer
interface BoltClient

abstract AbstractRemotingServer
abstract AbstractBoltClient

Configurable <|-- RemotingServer
Configurable <|-- BoltClient

RemotingServer <|.. AbstractRemotingServer
BoltClient <|.. AbstractBoltClient

AbstractRemotingServer <|-- RpcServer
AbstractBoltClient <|-- RpcClient
@enduml


### 对外暴露接口
在sofa-bolt中，将Netty封装后提供的接口主要在BaseRemoting为基类的类中，其继承结构主要如下图所示
<p align="center">
  <img src="https://raw.githubusercontent.com/jsycdut/photos/master/sofa-bolt/bolt-remote.png"/>
</p>
<p align="center">sofa-bolt提供的主要的通信接口
</p>

其中，BaseRemoting主要定义了通信的几种方式，包括oneway, invokeSync, invokeWithFuture, invokeWithFuture四种，然后RpcRemoting进行了部分细化，将c端和s端的具体实现交给了RpcClientRemoting和RpcServerRemoting进行实现，这也是考虑日后扩展的的一种方式吧。这里的结构有点类似门面模式。上面的RpcClient和RPCServer也提供了对外的通信的接口，主要是对这里BaseRemoting相关方法的调用，比如RpcClient提供的oneway调用方式，其实是调用其内部RpcClientRemoting的oneway方法，细节由RpcClientRemoting处理，RpcClient就是调用就行了，这一点有点像Spring MVC里面的Controller层调用Service层的方法，然后Service层又调用Dao层的方法一样，是个一层层的调用（是层级调用，不是链式调用）。


### 请求响应封装
sofa-bolt将请求响应封装成了以RemotingCommand为基类的一系列Command实现，请求封装为RequestCommand，响应封装为ResponseCommand，特定类型的Command又继续细分，其继承体系结构如下图

<p align="center">
  <img src="https://raw.githubusercontent.com/jsycdut/photos/master/sofa-bolt/RemotingCommand.png"/>
</p>
<p align="center">请求响应命令的封装体系 </p>

每个Command有一个CommandCode标识其类型，表示其为请求还是响应或者心跳之类的Command类型，这个的体系uml图如下，其中CommonCommandCode主要是对心跳类型的，请求和响应类型在RpcCommandCode里面，这里的实现代码在枚举应用了方法，这是很常用的，枚举不仅只是单独写几个类型在里面那么简单，另外枚举中标识了类型的值用的是short，要省一点空间使用。

<p align="center">
  <img src="https://raw.githubusercontent.com/jsycdut/photos/master/sofa-bolt/CommandCode.png"/>
</p>
<p align="center"></p>

有了Command作为请求响应的封装，那么如何构建Command就是接下来要解决的问题，sofa-bolt采用了类似简单工厂的设计模式（其实很难对sofa-bolt里面的某些类型直接归入某种特定的设计模式，一方面来源于我对设计模式的掌握程度不高，另一方面则来源于sofa-bolt确实没有特别规范的使用设计模式）

<p align="center">
  <img src="https://raw.githubusercontent.com/jsycdut/photos/master/sofa-bolt/RpcCommandFactory.png"/>
</p>
<p align="center">sofa-bolt的命令制造工厂</p>

在CommandFactory里面，涉及到了对应Command的封装和对应的序列化器的设置，结果的设置等，都是给了当前的Command一个标记，在另一个地方将会取出这些标记，然后根据标记去找对应的组件，来解析这个Command。

### 连接创建和管理
每一个请求和响应，都是和一个客户端和服务器端的连接相关的，这里涉及到了Connection的一系列东西，主要是Connection的创建、管理、相关事件的处理等，Connection这个实体类倒是没什么好说的，主要是对Netty Channel的封装，Connection的创建，涉及到一个ConnectionFactory，大部分重体力活都交给了AbstractConnectionFactory，具体见下图。

<p align="center">
  <img src="https://raw.githubusercontent.com/jsycdut/photos/master/sofa-bolt/ConnectionFactory.png"/>
</p>
<p align="center">sofa-bolt中的连接创建</p>

连接管理（ConnectionManager）是一个重头戏，涉及到连接的创建（调用ConnectionFactory进行创建），连接池中的连接的移除等，整个体系也比较复杂，ConnectionManager的继承体系如下图
<p align="center">
  <img src="https://raw.githubusercontent.com/jsycdut/photos/master/sofa-bolt/ConnectionManager.png"/>
</p>
<p align="center">sofa-bolt中的连接管理</p>


## sofa-bolt s端启动时序图

## sofa-bolt c端启动时序图

## 请求处理和响应时序图
